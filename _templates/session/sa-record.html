{% extends "_base.html" %} {% block statics %}
<link
	rel="stylesheet"
	href="/static/css/session/sa-record.css"
/>
{% endblock statics %} {% block contents %}
<h2 class="mb-3">Sustained Attention</h2>
<div class="card rounded-3 mb-0">
	<div class="card-body">
		<div class="d-flex flex-row align-items-center justify-content-center">
			<div class="card-body">
				<div class="block">
					<div class="d-flex justify-content-center">
						<input
							type="range"
							class="form-control-range vertical-slider"
							step="0.1"
							id="slider"
							orient="vertical"
						/>
					</div>
					<div class="d-flex justify-content-around my-3">
						<button
							class="btn btn-primary"
							id="startStopButton"
						>
							Start Recording
						</button>

						<a
							role="button"
							href="{% url 'session:sa-inquiry' user.username %}"
							class="btn btn-secondary"
							>My Recordings</a
						>
					</div>
					<div class="d-flex justify-content-center">
						<h4 id="stopwatch">0.00</h4>
					</div>
				</div>
			</div>
		</div>
		<!-- Rate Modal -->
		<div
			class="modal fade"
			id="modal-rate"
			data-bs-backdrop="static"
			data-bs-keyboard="false"
			tabindex="-1"
			aria-labelledby="modal-rate-label"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1
							class="modal-title fs-5"
							id="modal-rate-label"
						>
							Attention Event!!
						</h1>
					</div>
					<div class="modal-body text-center">
						<h3 class="fw-bold mt-2">Report Your Attention!</h3>
						<div
							class="d-flex flex-row justify-content-around"
							style="font-size: 3rem"
						>
							<span
								class="emoji"
								data-score="0"
								data-bs-dismiss="modal"
							>
								<i class="bi bi-emoji-frown"></i>
							</span>
							<span
								class="emoji"
								data-score="1"
								data-bs-dismiss="modal"
							>
								<i class="bi bi-emoji-smile"></i>
							</span>
							<span
								class="emoji"
								data-score="2"
								data-bs-dismiss="modal"
							>
								<i class="bi bi-emoji-heart-eyes"></i>
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /Rate Modal -->

		<!-- Result Modal -->
		<div
			class="modal fade"
			id="modal-result"
			data-bs-backdrop="static"
			data-bs-keyboard="false"
			tabindex="-1"
			aria-labelledby="modal-result-label"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1
							class="modal-title fs-5"
							id="modal-result-label"
						>
							Meditation Finished
						</h1>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body">
						<p class="fw-bold mt-2">Respiration Chart</p>
						<div class="w-auto h-auto">
							<canvas
								class="col-1"
								id="plotting-modal"
							></canvas>
						</div>
						<form
							id="csv-form"
							method="POST"
						>
							{% csrf_token %}
							<input
								type="text"
								id="csvInput"
								name="csv_input"
								style="display: none"
							/>
							<input
								type="text"
								id="rateInput"
								name="rate_input"
								style="display: none"
							/>
							<input
								type="text"
								id="timeInput"
								name="time_input"
								style="display: none"
							/>
							<p class="fw-bold mt-2">Notes for this meditation (optional)</p>
							<textarea
								class="form-control"
								id="noteInput"
								name="note_input"
								rows="3"
							></textarea>
						</form>
					</div>
					<div class="modal-footer">
						<button
							type="submit"
							class="btn btn-primary"
							id="saveButton"
							form="csv-form"
							disabled="true"
						>
							Save Recording
						</button>
						<button
							type="button"
							class="btn btn-danger"
							id="discardButton"
							data-bs-dismiss="modal"
						>
							Discard
						</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /Result Modal -->
	</div>
	{% endblock contents %} {% block scripts %}
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="/static/js/session/sa-record.js"></script>
	{% endblock %}
</div>
